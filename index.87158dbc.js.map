{"mappings":"AAAA,IAAMA,QAAU,qCACVC,SAAW,2BACbC,YAAc,EACdC,aAAe,GAEbC,WAAaC,SAASC,eAAe,eACrCC,QAAUF,SAASG,cAAc,YACjCC,eAAiBJ,SAASG,cAAc,cAK9C,SAASE,SAASC,GAChBA,EAAMC,iBACNT,aAAeQ,EAAME,OAAOC,SAASC,YAAYC,MAAMC,OACvDf,YAAc,EACdK,QAAQW,UAAY,GACpBT,eAAeU,UAAUC,IAAI,UACR,KAAjBjB,aAIJkB,YAAYlB,aAAcD,aAHxBoB,SAASC,OAAOC,QAAQ,8B,CAM5B,SAASC,aACPJ,YAAYlB,eAAgBD,Y,CAG9B,SAASmB,YAAYK,EAAOC,GAC1BC,QAAQC,IAAI,+BAAgDC,OAAjBJ,EAAM,aAAgBI,OAALH,IAC5DI,MACGC,IAAI/B,SAAU,CACbgC,OAAQ,CACNC,IAAKlC,QACLmC,EAAGT,EACHU,WAAY,QACZC,YAAa,aACbC,YAAY,EACZX,KAAMA,EACNY,SAAU,MAGbC,MAAK,SAAAC,GACJ,IAA4BC,EAAAD,EAASE,KAA7BC,EAAoBF,EAApBE,KAAMC,EAAcH,EAAdG,UACdjB,QAAQC,IAAI,eAA0CC,OAA3Be,EAAU,mBAA6Bf,OAAZc,EAAKE,SACvC,IAAhBF,EAAKE,QAITC,cAAcH,GACD,IAATjB,GACFL,SAASC,OAAOyB,QAAQ,oBAA8BlB,OAAVe,EAAU,aAEpDtC,QAAQ0C,mBAAqBJ,GAC/BpC,eAAeU,UAAUC,IAAI,UAC7BE,SAASC,OAAO2B,KAAK,+DAErBzC,eAAeU,UAAUgC,OAAO,WAXhC7B,SAASC,OAAO6B,QAAQ,2E,IAc3BC,OAAM,SAAAC,GACLhC,SAASC,OAAO6B,QAAQ,uDACxBxB,QAAQ0B,MAAM,yBAA0BA,E,IAI9C,SAASP,cAAcQ,GACrB,IAAMC,EAASD,EACZE,KAAI,SAAAC,GACH,MAAO,oBAEO5B,OADH4B,EAAMC,cAAc,6CACW7B,OAA5B4B,EAAME,aAAa,WAEO9B,OAFE4B,EAAMG,KAAK,iGAGb/B,OADA4B,EAAMI,MAAM,sDAEThC,OADH4B,EAAMK,MAAM,yDAERjC,OADD4B,EAAMM,SAAS,0DACElC,OAAhB4B,EAAMO,UAAU,mC,IAI7DC,KAAK,IACR3D,QAAQ4D,mBAAmB,YAAaX,GACvB,IAAIY,eAAe,aAAc,CAChDC,aAAc,MACdC,aAAc,MAEPC,UACTC,c,CAGF,SAASA,eACP,IAAQC,EAAuBpE,SAC5BG,cAAc,YACdkE,kBAAkBC,wBAFbC,OAIRC,OAAOC,SAAS,CACdC,IAAkB,EAAbN,EACLO,SAAU,U,CAzFd5E,WAAW6E,iBAAiB,SAAUvE,UACtCD,eAAewE,iBAAiB,QAASxD","sources":["src/script.js"],"sourcesContent":["const API_KEY = '22910062-3497cb46ee95463a66c6aaf70';\nconst BASE_URL = 'https://pixabay.com/api/';\nlet currentPage = 1;\nlet currentQuery = '';\n\nconst searchForm = document.getElementById('search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreButton = document.querySelector('.load-more');\n\nsearchForm.addEventListener('submit', onSearch);\nloadMoreButton.addEventListener('click', onLoadMore);\n\nfunction onSearch(event) {\n  event.preventDefault();\n  currentQuery = event.target.elements.searchQuery.value.trim();\n  currentPage = 1;\n  gallery.innerHTML = '';\n  loadMoreButton.classList.add('hidden');\n  if (currentQuery === '') {\n    Notiflix.Notify.warning('Please enter a search term.');\n    return;\n  }\n  fetchImages(currentQuery, currentPage);\n}\n\nfunction onLoadMore() {\n  fetchImages(currentQuery, ++currentPage);\n}\n\nfunction fetchImages(query, page) {\n  console.log(`Fetching images for query: \"${query}\", page: ${page}`);  // Debug log\n  axios\n    .get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 20,\n      },\n    })\n    .then(response => {\n      const { hits, totalHits } = response.data;\n      console.log(`Total Hits: ${totalHits}, Hits Length: ${hits.length}`);  // Debug log\n      if (hits.length === 0) {\n        Notiflix.Notify.failure('Sorry, there are no images matching your search query. Please try again.');\n        return;\n      }\n      renderGallery(hits);\n      if (page === 1) {\n        Notiflix.Notify.success(`Hooray! We found ${totalHits} images.`);\n      }\n      if (gallery.childElementCount >= totalHits) {\n        loadMoreButton.classList.add('hidden');\n        Notiflix.Notify.info(\"We're sorry, but you've reached the end of search results.\");\n      } else {\n        loadMoreButton.classList.remove('hidden');\n      }\n    })\n    .catch(error => {\n      Notiflix.Notify.failure('Oops! Something went wrong! Try reloading the page.');\n      console.error('Error fetching images:', error);\n    });\n}\n\nfunction renderGallery(images) {\n  const markup = images\n    .map(image => {\n      return `\n      <a href=\"${image.largeImageURL}\" class=\"photo-card\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n        <div class=\"info\">\n          <p class=\"info-item\"><b>Likes</b> ${image.likes}</p>\n          <p class=\"info-item\"><b>Views</b> ${image.views}</p>\n          <p class=\"info-item\"><b>Comments</b> ${image.comments}</p>\n          <p class=\"info-item\"><b>Downloads</b> ${image.downloads}</p>\n        </div>\n      </a>`;\n    })\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  lightbox.refresh();\n  smoothScroll();\n}\n\nfunction smoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["API_KEY","BASE_URL","currentPage","currentQuery","searchForm","document","getElementById","gallery","querySelector","loadMoreButton","onSearch","event","preventDefault","target","elements","searchQuery","value","trim","innerHTML","classList","add","fetchImages","Notiflix","Notify","warning","onLoadMore","query","page","console","log","concat","axios","get","params","key","q","image_type","orientation","safesearch","per_page","then","response","_data","data","hits","totalHits","length","renderGallery","success","childElementCount","info","remove","failure","catch","error","images","markup","map","image","largeImageURL","webformatURL","tags","likes","views","comments","downloads","join","insertAdjacentHTML","SimpleLightbox","captionsData","captionDelay","refresh","smoothScroll","cardHeight","firstElementChild","getBoundingClientRect","height","window","scrollBy","top","behavior","addEventListener"],"version":3,"file":"index.87158dbc.js.map"}